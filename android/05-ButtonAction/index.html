<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>ボタンイベントの実装 | Android programing getstart</title><link rel="stylesheet" type="text/css" href="/AndroidCourse//css/normalize.css"><link rel="stylesheet" type="text/css" href="/AndroidCourse//css/highlight.css"><link rel="stylesheet" type="text/css" href="/AndroidCourse//css/very-simple.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="Shortcut Icon" type="image/x-icon" href="/AndroidCourse/favicon.ico"></head><body><!-- include the sidebar--><!-- include ./includes/sidebar.jade--><!-- Blog title and subtitle--><header><div class="container header"><a id="logo" href="/AndroidCourse/." class="title">Android programing getstart</a><span class="subtitle"></span><label id="toggle-menu" for="menu" onclick><i class="fa fa-bars"></i></label></div></header><!-- use checkbox hack for toggle nav-bar on small screens--><input id="menu" type="checkbox"><!-- Navigation Links--><nav id="nav"><div class="container"><a href="/AndroidCourse/" class="sidebar-nav-item">Home</a></div></nav><div id="header-margin-bar"></div><!-- gallery that comes before the header--><div class="wrapper"><div class="container post-header"><h1>ボタンイベントの実装</h1></div></div>
<article><div class="container post"><p>アプリの基本イベントとなるボタンが押された時の処理を学習し、蔵書検索ボタンの機能を作り始めます。<br>合わせてコンソールログの出力、Toast(トースト)の機能を試します</p>
<!-- toc -->
<ul>
<li><a href="#ボタン押下処理">ボタン押下処理</a><ul>
<li><a href="#javaプログラムとxmlレイアウトの関連付け">javaプログラムとxmlレイアウトの関連付け</a></li>
<li><a href="#ボタンクリックアクションの実装">ボタンクリックアクションの実装</a></li>
</ul>
</li>
<li><a href="#色々なボタンイベントの実装">色々なボタンイベントの実装</a><ul>
<li><a href="#パターン1">パターン１</a></li>
<li><a href="#パターン2">パターン２</a></li>
<li><a href="#パターン3">パターン３</a></li>
<li><a href="#パターン4">パターン４</a></li>
</ul>
</li>
</ul>
<!-- tocstop -->
<p>当ページではアプリのボタンが押下された時のプログラム実装を学習します。<br>またボタンや画面の裏で値を保持しておく機能として変数という概念を学習します。<br><a href="/AndroidCourse/android/04-MakeLayoutDesign">前のページで検索画面のレイアウト実装を解説しています</a><br>次のページでは非同期処理やAPI通信機能を使い実際に蔵書検索の機能の作り込みを解説します。</p>
<h1><span id="ボタン押下処理">ボタン押下処理</span></h1><p>アプリを作る上で一つは必ず存在するボタン。<br>普段何気なく使っているボタンが押された時、プログラムが実行され別の画面を表示したり、何か計算を行なってユーザに向けて画面に表示するなど<br>見えないところで色々なプログラムが動いています。<br>当ページでは画面の操作としてボタンを押した時にログを表示したり、Toast(トースト)と呼ばれるユーザに向けて情報を表示するプログラムの実装を解説していきます。</p>
<p>今回プログラムは「MainActivity.java」というファイルにボタンが押された時のプログラムを記述していきます。<br>ですが、前のページで画面レイアウトを作成したのが<code>activity_main.xml</code>というファイルでした。<br>別のファイルです…なので「MainActivity.java」に<code>activity_main.xml</code>ファイルを取り込む必要があります。<br>「MainActivity.java」で<code>activity_main.xml</code>内のボタンを使う準備を行います。</p>
<h2><span id="javaプログラムとxmlレイアウトの関連付け">javaプログラムとxmlレイアウトの関連付け</span></h2><p>一つ前の<a href="/AndroidCourse/android/04-MakeLayoutDesign">レイアウト作成</a>の内容で作成したxmlレイアウトですが、<br>今回プログラムを記述する”MainActivity.java”が処理された時に表示されるプログラムがすでに記述されています。<br>それが以下のコード内矢印に囲まれてるプログラムでMainActivity.javaが処理された時にレイアウトの読み込みを行なっています。</p>
<p><font color="RoyalBlue"><strong><em>MainActivity.java</em></strong></font><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">public class MainActivity extends AppCompatActivity &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">        super.onCreate(savedInstanceState);</span><br><span class="line">        //↓↓↓↓↓↓↓↓↓↓↓↓レイアウト読み込み↓↓↓↓↓↓↓↓↓↓↓↓</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        //↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><font color="red">「おまじない」</font>という言葉で紹介されることもありますが、このコードが書かれていないと画面には何も表示されず、真っ白な画面で止まってしまうので必ず記述しましょう。</p>
<p>簡単に図にしてみます。<br><img src="LoadLayout.png" alt="alt" title="loadlayout" width="450"></p>
<p>上記のコードが記述されることで画面にレイアウトが表示されていることがわかりました、次にButtonをクリックしたときに検索などの処理を行うにはMainActivity.javaなど<strong>javaファイルでクリックされた時のプログラムを書く</strong>必要があります。<br>ただ、レイアウトを作成したのは”activity_main.xml”ファイルですので別のファイルです、ですがjavaファイルのプログラムからxmlファイルのボタンなどを関連付けることができます。</p>
<p>そのためには”activity_main.xml”に配置したButtonをMainActivity.javaで関連付け、操作するための名前をつける必要があります。</p>
<p>ButtonやEditTextなどのウィジェットをjavaプログラムから関連付けるにはいくつかの方法があります、一番よく使う方法として<font color="red"><strong>findViewById()</strong></font>を使う方法です、”setContentView”で読み込んだレイアウトの中からウィジェットやビューを関連付けることができます。</p>
<p>ウィジェットやビューを関連づけるために<code>activity_main.xml</code>内のButtonやEditTextなどにユニークID(名称)を設定する必要があります。<br>ユニークIDの設定はレイアウトファイルで行いますので<strong>activity_main.xml</strong>を開いてください。<br><img src="rerationcode01.png" alt="alt" title="reration code" width="500"></p>
<p>はじめに”蔵書検索”ボタンをjavaプログラムから関連づけるためのユニークID(名称)を設定します、<br>“蔵書検索”ボタンをクリックしAttributesエリアから<font color="red"><strong>“ID”</strong></font>項目を以下のように修正します<br><img src="setid01.png" alt="alt" title="reration code" width="500"></p>
<blockquote>
<p>button -&gt; BookSearchBtn</p>
</blockquote>
<p>このAttributesの<font color="red"><strong>“ID”</strong></font>という項目がjavaプログラムから関連づける時に必要な情報になります。</p>
<p>では他の項目も同じように<font color="red"><strong>“ID”</strong></font>項目を変更していきます。<br>※もし変更前IDが一致していなくても、Noと場所の照らし合わせを正として修正してください<br><img src="setid03.png" alt="alt" title="reration code" width="500"></p>
<table>
<thead>
<tr>
<th style="text-align:center">No.</th>
<th style="text-align:left">変更前のID</th>
<th style="text-align:left">変更後ID</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">①</td>
<td style="text-align:left">button</td>
<td style="text-align:left">BookSearchBtn</td>
</tr>
<tr>
<td style="text-align:center">②</td>
<td style="text-align:left">button2</td>
<td style="text-align:left">LibSearchBtn</td>
</tr>
<tr>
<td style="text-align:center">③</td>
<td style="text-align:left">button3</td>
<td style="text-align:left">HistoryBtn</td>
</tr>
<tr>
<td style="text-align:center">④</td>
<td style="text-align:left">editText</td>
<td style="text-align:left">BookSearchEdit</td>
</tr>
<tr>
<td style="text-align:center">⑤</td>
<td style="text-align:left">editText2</td>
<td style="text-align:left">LibSearchEdit</td>
</tr>
</tbody>
</table>
<p>IDを変更するとComponent Treeの内容も変更が反映されます<br>各ウィジェットにIDが設定できたら”MainActivity.java”にプログラムを追加してウィジェットを<code>activity_main.xml</code>内のWidgetなどと関連付け、MainActivity.javaで使う時の名前をつけていきます。</p>
<p>MainActivity.javaを編集します。<br><img src="setid04.png" alt="alt" title="reration code" width="500"><br>では<strong>findViewById</strong>メソッドと<strong>“activity_main.xml”に設定したID</strong>を使ってButtonウィジェットを探します</p>
<p>コード記述する中でIDの入力中に小さいリスト表示がされると思いますので十字キーの上下を押して選択し、<code>Enter</code>キーを押せばプログラムに反映されます。</p>
<p><img src="setid05.png" alt="alt" title="reration code" width="650"></p>
<p><font color="RoyalBlue"><strong><em>MainActivity.java</em></strong></font><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">public class MainActivity extends AppCompatActivity &#123;</span><br><span class="line"></span><br><span class="line">    //↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓追加↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓</span><br><span class="line">    // レイアウトxmlと関連付けるWidget</span><br><span class="line">    private Button bookSearchBtn;</span><br><span class="line">    //↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">        super.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        //↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓追加↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓</span><br><span class="line">        bookSearchBtn = findViewById(R.id.BookSearchBtn);</span><br><span class="line">        //↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>上記追加した２行で<font color="red">activity_main.xmlの”BookSearchBtn”（”蔵書検索”ボタン）を、MainActivityで使う時の名前として<code>buttonSearch</code>という名前を設定する</font>というプログラムを記述することができました。<br>２行の内訳としては以下です<br><img src="setid06.png" alt="alt" title="reration code" width="650"></p>
<table>
<thead>
<tr>
<th style="text-align:center">No.</th>
<th style="text-align:left">各No.のコードの説明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">①</td>
<td style="text-align:left">②〜③で宣言するウィジェットの使用できる範囲を決める単語</td>
</tr>
<tr>
<td style="text-align:center">②</td>
<td style="text-align:left">activity_main.xml内のウィジェットと関連づける型</td>
</tr>
<tr>
<td style="text-align:center">③</td>
<td style="text-align:left">MainActivity.javaで使う時のユニークな名前</td>
</tr>
<tr>
<td style="text-align:center">④</td>
<td style="text-align:left">②〜③で宣言したウィジェットを変更する時の記述方法</td>
</tr>
<tr>
<td style="text-align:center">⑤</td>
<td style="text-align:left">activity_main.xml内のウィジェットと関連付けを行うためのプログラム</td>
</tr>
<tr>
<td style="text-align:center">⑥</td>
<td style="text-align:left">activity_main.xml内の関連付けを行うウィジェット/ビューのユニークID</td>
</tr>
</tbody>
</table>
<p><font color="red">①〜③で追加したコードをクラスの宣言と言います、これは後ほど解説しますので、深く考えずに進んでください！</font><br>これで”蔵書検索”ボタンをxmlレイアウトとMainActivity.javaのプログラムで関連付けることができました。</p>
<h2><span id="ボタンクリックアクションの実装">ボタンクリックアクションの実装</span></h2><p>次に”蔵書検索”ボタンのクリック時に何か処理をする場合のプログラムを記述していきます。</p>
<p><font color="RoyalBlue"><strong><em>MainActivity.java</em></strong></font><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">public class MainActivity extends AppCompatActivity &#123;</span><br><span class="line"></span><br><span class="line">    // レイアウトxmlと関連付けるWidget</span><br><span class="line">    private Button bookSearchBtn;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">        super.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line">        bookSearchBtn = findViewById(R.id.BookSearchBtn);</span><br><span class="line">        //↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓追加↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓</span><br><span class="line">        bookSearchBtn.setOnClickListener(new View.OnClickListener() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void onClick(View v) &#123;</span><br><span class="line">                Log.d(&quot;BookSearchBtn&quot;, &quot;onClick: BookSearch Button&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        //↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>上記まで実装が完了したら動作確認をしてみましょう、<code>Run</code>アイコンをクリックしてエミュレータを起動します。<br>アプリ画面が表示されたら<strong>蔵書検索</strong>ボタンをクリックしてみてください。<br>以下のようにAndroid Studioの左下<font color="red">Logcat</font>タブをクリックし、赤枠のログが出力されていることを確認してみましょう。<br><img src="setid07.png" alt="alt" title="reration code" width="650"><br>上記で表示させたログですが、出力するためには以下のようにコードを記述する必要があります。<br>ログはプログラム不具合の原因を調査したり、期待するデータが取得できていることなどに活用しますのでログを出力させるための<br>テンプレートとして以下の書き方を覚えておきましょう。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Log.d(&quot;tag name&quot;, &quot;message&quot;);</span><br></pre></td></tr></table></figure></p>
<p>ボタンを押した時に何か処理を行うためのプログラムを実装できたので工程などをおさらいしてみましょう。<br><img src="DesignCode.png" alt="alt" title="DesignCode" width="450"></p>
<p>文字の色分けなどは以下の通りです</p>
<ul>
<li><font color="blue">青文字</font>の「ボタン押下時に検索を行う」が大きな課題</li>
<li><font color="red">赤文字</font>、黒文字で書かれたところがエンジニアの気づくべき手順</li>
<li>また<font color="red">赤文字</font>の「画面にボタンを表示する必要がある」「ボタンが押された時にプログラムを実行する必要がある」の２つは編集が必要なファイルごとの課題</li>
<li><font color="gray">灰色の四角</font>に囲われている内容がエンジニアがコードを記述する必要のある箇所</li>
</ul>
<p>次はToast機能を使って<strong>蔵書検索</strong>ボタンの横に配置したEditTextに入力された文字を画面に表示するプログラムを作っていきます。<br>MainActivity.javaのコードを修正していきます。</p>
<p><font color="RoyalBlue"><strong><em>MainActivity.java</em></strong></font><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">public class MainActivity extends AppCompatActivity &#123;</span><br><span class="line"></span><br><span class="line">    // レイアウトxmlと関連付けるWidget</span><br><span class="line">    private Button bookSearchBtn;</span><br><span class="line">    //↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓追加↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓</span><br><span class="line">    private EditText bookSearchEditor;</span><br><span class="line">    //↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">        super.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line">        bookSearchBtn = findViewById(R.id.BookSearchBtn);</span><br><span class="line">        //↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓追加↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓</span><br><span class="line">        bookSearchEditor = findViewById(R.id.BookSearchEdit);</span><br><span class="line">        //↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑</span><br><span class="line">        bookSearchBtn.setOnClickListener(new View.OnClickListener() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void onClick(View v) &#123;</span><br><span class="line">                Log.d(&quot;BookSearchBtn&quot;, &quot;onClick: BookSearch Button&quot;);</span><br><span class="line">                //↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓追加↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓</span><br><span class="line">                Toast.makeText(getBaseContext()</span><br><span class="line">                        , &quot;入力された文字は [&quot; + bookSearchEditor.getText().toString() + &quot;]です。&quot;</span><br><span class="line">                        , Toast.LENGTH_LONG).show();</span><br><span class="line">                //↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>コードの修正が終わったら<code>Run</code>アイコンをクリックしてエミュレータにアプリをインストールし直します。<br>アプリ画面が表示されたら文字を入力してから<strong>蔵書検索</strong>ボタンをクリックしてみましょう。<br>前回のログ確認と違い、以下の画面のように文字が表示されたでしょうか？<br><img src="setid08.png" alt="alt" title="reration code" width="300"></p>
<p>この画面上に現れる機能がToastです、ボタンが押された時にユーザに何か情報を伝える時などに利用します。<br>またToastは一定時間で自動的に非表示になりますのでユーザが確認ボタンを押す必要もなく簡易なプログラムで利用することができます。</p>
<h1><span id="色々なボタンイベントの実装">色々なボタンイベントの実装</span></h1><p>ボタンが押された時のプログラムの実装解説としては以上になります。<br>しかしボタンイベントを実装方法に絞ってもボタンが押された時のプログラムの記述方法がいくつもあります。<br>その例をいくつか紹介します。</p>
<p>ここでは色々な新しい単語も紹介しますが、単語に関しては実際に利用する時に詳しく解説します。</p>
<h2><span id="パターン1">パターン１</span></h2><p><code>bookSearchBtn</code>の宣言場所が違う実装方法<br>パターン１は<code>bookSearchBtn</code>インスタンスの宣言スコープが違う実装方法です</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">public class MainActivity extends AppCompatActivity &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">        super.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        Button bookSearchBtn = findViewById(R.id.BookSearchBtn);</span><br><span class="line">        bookSearchBtn.setOnClickListener(new View.OnClickListener() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void onClick(View v) &#123;</span><br><span class="line">                // ボタンが押された時のプログラム</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="パターン2">パターン２</span></h2><p>パターン１や当ページで紹介したプログラムから、ボタンイベントのプログラム自体を宣言し固有名称をつけた実装方法です<br>この実装方法にはメリットも少なくわかりにくいので比較的少ない実装方法です</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">public class MainActivity extends AppCompatActivity &#123;</span><br><span class="line"></span><br><span class="line">    private Button bookSearchBtn;</span><br><span class="line"></span><br><span class="line">    View.OnClickListener ButtonClick = new View.OnClickListener() &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public void onClick(View view) &#123;</span><br><span class="line">            // ボタンが押された時のプログラム      </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    @Override</span><br><span class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">        super.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line">        bookSearchBtn = findViewById(R.id.BookSearchBtn);</span><br><span class="line">        bookSearchBtn.setOnClickListener(ButtonClick);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="パターン3">パターン３</span></h2><p><code>View.OnClickLister</code>インターフェースをMainActivityクラスに付与した実装方法<br>パターン３はボタンが押された時の実装をMainActivityクラスに委譲した実装方法です</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">    public class MainActivity extends AppCompatActivity implements View.OnClickListener &#123;</span><br><span class="line"></span><br><span class="line">    private Button bookSearchBtn;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">        super.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line">        bookSearchBtn = findViewById(R.id.BookSearchBtn);</span><br><span class="line">        bookSearchBtn.setOnClickListener(this);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onClick(View view) &#123;</span><br><span class="line">        // ボタンが押された時のプログラム</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="パターン4">パターン４</span></h2><p>新しくボタンクリックイベントのインナークラス(外部クラス)を作成する実装方法<br>この方法はリスト表示されている時などに使うことが多いです</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">public class MainActivity extends AppCompatActivity &#123;</span><br><span class="line"></span><br><span class="line">    private Button bookSearchBtn;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">        super.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line">        bookSearchBtn = findViewById(R.id.BookSearchBtn);</span><br><span class="line">        bookSearchBtn.setOnClickListener(new ButtonClick());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    class ButtonClick implements View.OnClickListener &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public void onClick(View view) &#123;</span><br><span class="line">            // ボタンが押された時のプログラム</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>他にもボタンが押された時のプログラムの書き方はありますが、上記の4パターンが使われていることが多いです。<br>ボタンに限ったプログラムの書き方だけでもこれだけのパターンがあり、ボタンが押されたイベント以外にも同じファイルにプログラムが<br>記述されると最初はプログラムを見るのが嫌になってしまうこともあるかもしれません。</p>
<p>ですが、<font color="red"><strong>プログラムを細かく見る（読む）</strong></font>ことで名前のつけ方に共通点を見つけたり単語を検索しながら考え、失敗を繰り返しながら試すことで<br>プログラムを深く理解することができるようになります。</p>
<p>以上でボタンが押された時のプログラム実装ができました、次のページでいよいよ本を検索するプログラムを記述していきます。<br><a href="/AndroidCourse/android/05-ButtonAction">非同期処理、REST API通信の実装</a></p>
</div><!-- comment system--><div class="container"><hr></div></article><footer id="footer"><div class="container"><div class="bar"><div class="social"><a href="/atom.xml" target="_blank"><i class="fa fa-rss"></i></a></div><div class="footer">© 2018 <a href="/" rel="nofollow">kuririnz</a>. Powered by <a rel="nofollow" target="_blank" href="https://hexo.io">Hexo</a>. Theme <a target="_blank" href="https://github.com/lotabout/very-simple">very-simple</a>.</div></div></div></footer><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
    $(".fancybox").fancybox();
});
</script></body></html>
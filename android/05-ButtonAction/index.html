<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>ボタンイベントの実装 | Android programing getstart</title><link rel="stylesheet" type="text/css" href="/AndroidCourse//css/normalize.css"><link rel="stylesheet" type="text/css" href="/AndroidCourse//css/highlight.css"><link rel="stylesheet" type="text/css" href="/AndroidCourse//css/very-simple.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="Shortcut Icon" type="image/x-icon" href="../../favicon.ico"></head><body><!-- include the sidebar--><!-- include ./includes/sidebar.jade--><!-- Blog title and subtitle--><header><div class="container header"><a id="logo" href="../../." class="title">Android programing getstart</a><span class="subtitle"></span><label id="toggle-menu" for="menu" onclick><i class="fa fa-bars"></i></label></div></header><!-- use checkbox hack for toggle nav-bar on small screens--><input id="menu" type="checkbox"><!-- Navigation Links--><nav id="nav"><div class="container"><a href="../../index.html" class="sidebar-nav-item">Home</a></div></nav><div id="header-margin-bar"></div><!-- gallery that comes before the header--><div class="wrapper"><div class="container post-header"><h1>ボタンイベントの実装</h1></div></div>
<article><div class="container post"><p>アプリの基本イベントとなるボタンが押された時の処理を学習し、蔵書検索ボタンの機能を作り始めます。<br>合わせてコンソールログを表示、Toast(トースト)の機能を試します</p>
<!-- toc -->
<ul>
<li><a href="#学習ポイント">学習ポイント</a></li>
<li><a href="#検索画面の機能を考える">検索画面の機能を考える</a></li>
<li><a href="#javaプログラムとxmlレイアウトの関連付け">javaプログラムとxmlレイアウトの関連付け</a><ul>
<li><a href="#コード記述時の便利機能">コード記述時の便利機能</a></li>
</ul>
</li>
<li><a href="#ボタンクリックアクションの実装">ボタンクリックアクションの実装</a><ul>
<li><a href="#クラス-変数">クラス、変数</a><ul>
<li><a href="#ウィジェットとクラス">ウィジェットとクラス</a></li>
</ul>
</li>
<li><a href="#メソッド">メソッド</a></li>
</ul>
</li>
<li><a href="#ボタンクリックアクションでトースト表示機能">ボタンクリックアクションでトースト表示機能</a></li>
<li><a href="#色々なボタンイベントの実装">色々なボタンイベントの実装</a><ul>
<li><a href="#パターン1">パターン１</a></li>
<li><a href="#パターン2">パターン２</a></li>
<li><a href="#パターン3">パターン３</a></li>
<li><a href="#パターン4">パターン４</a></li>
<li><a href="#パターン5">パターン５</a></li>
</ul>
</li>
<li><a href="#プログラミング課題">プログラミング課題</a><ul>
<li><a href="#条件分岐処理">条件分岐処理</a></li>
<li><a href="#繰り返し処理">繰り返し処理</a></li>
</ul>
</li>
</ul>
<!-- tocstop -->
<p><a href="/AndroidCourse/android/04-MakeLayoutDesign">検索画面レイアウト作成</a>からの引き続きの学習ページです。</p>
<h1><span id="学習ポイント">学習ポイント</span></h1><ul>
<li>レイアウトファイルとjavaファイル間のウィジェットの関連付け</li>
<li>ボタンクリックイベントの実装方法</li>
<li>クラス、変数</li>
<li>メソッド</li>
<li>条件分岐と繰り返し処理</li>
</ul>
<p>レイアウト作成した画面に配置したボタンがクリックされた時に実行したい命令を作りながらレイアウトファイルとjavaファイルでの関連付けやプログラミングにおける重要な変数、メソッドを学習します。</p>
<h1><span id="検索画面の機能を考える">検索画面の機能を考える</span></h1><p>このページからはプログラムの実装していきますが、前のページで作成したレイアウトにはどんな操作が発生するか考えるため、もう一度完成したレイアウトを見てみます。<br><img src="/AndroidCourse/android/04-MakeLayoutDesign/CompleteScreen.png" width="500" title="CompleteScreen"><br>大まかに以下ような操作をユーザが行い、ウィジェットによっては機能として動くプログラムを実装する必要がありそうです。</p>
<ol>
<li>検索する蔵書名、またはその一部を入力する操作</li>
<li>蔵書検索ボタンをクリック<ul>
<li>入力された蔵書名、またはその一部から蔵書の検索結果を表示する画面に遷移する機能</li>
</ul>
</li>
<li>閲覧履歴をクリック<ul>
<li>過去に検索結果から閲覧した蔵書のリストを表示する画面に遷移する機能</li>
</ul>
</li>
</ol>
<p>当ページではアプリを作る上での基礎になる”ボタンをクリックした時に画面を遷移する”の前にボタンをクリックした時にログ表示、Toastを表示するところまでを解説していきます。</p>
<h1><span id="javaプログラムとxmlレイアウトの関連付け">javaプログラムとxmlレイアウトの関連付け</span></h1><p>普段何気なく使っているアプリのボタンをクリックした時、アプリではプログラムが実行され別の画面を表示したり、計算や文字の置き換えなどの命令を実行して画面の表示内容を更新するなど見えないところで色々な命令が動いています。</p>
<p>ボタンをクリックした時のプログラムや画面の表示内容更新などは<strong>java</strong>ファイルに実装していきます。<br>“検索画面レイアウト作成”ページでレイアウト作成したのは<code>activity_main.xml</code>というファイルでしたが、このレイアウトファイルは「MainActivity.java」のプログラムによって画面に表示されています。</p>
<p>では<strong>MainActivity.java</strong>ファイルを開きプログラムを実装していきます。<br><img src="/AndroidCourse/android/05-ButtonAction/setid04.png" width="500" title="rerationcode"></p>
<p>前の記事<a href="/AndroidCourse/android/04-MakeLayoutDesign">レイアウト作成</a>の内容で作成したxmlレイアウトですが、<br>実は”MainActivity.java”の中ですでに関連付けのプログラムが実装されています。<br>それが以下のコード内矢印に囲まれてる<code>setContentView()</code>という命令でMainActivity.javaが表示され<code>setContentView()</code>の命令を実行する際に “()” 内で指定したレイアウトxmlファイルと関連付けを行い、内部で画面に表示するという命令を実行してくれています。<br><figure class="highlight java"><figcaption><span>MainActivity.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        <span class="comment">//↓↓↓↓↓↓↓↓↓↓↓↓レイアウト読み込み↓↓↓↓↓↓↓↓↓↓↓↓</span></span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        <span class="comment">//↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><code>setContentView()</code>の様に必ず書かないといけないけど説明が難しいコードを<font color="red"><strong><em>おまじない</em></strong></font>と紹介されることがありますが、実装されていないとアプリが異常終了してしまったり、今回の場合では画面が真っ白な画面が表示されるだけになってしまうので<font color="red"><strong><em>おまじない</em></strong></font>と紹介されたところは<em>よくわからないけど書かないとよくないことが起こる</em>と頭の片隅に置いておいてください。</p>
<p>次にButtonをクリックしたときに検索などの処理を行うにはMainActivity.javaなど<strong>javaファイルでクリックされた時のプログラムを書く</strong>必要があります。<br><code>setContentView()</code>を実行したことでMainActivity.javaから”activity_main.xml”のボタンなどウィジェットやビューを参照できる状態になっています、<br>あとはボタンやエディットテキストなどを各ウィジェットやビューにユニークな名称(他と被らない情報)があればjavaファイルでも判別して使えそうです。</p>
<p>“activity_main.xml”内のButtonやEditTextなどにはユニークな名称を設定する項目として<strong>ID</strong>という項目があるので、<strong>activity_main.xml</strong>を開きます。<br><img src="/AndroidCourse/android/05-ButtonAction/rerationcode01.png" width="500" title="rerationcode"></p>
<p>“蔵書検索”ボタンをクリックしAttributesエリアから<strong>“ID”</strong>項目を以下のように修正します<br><img src="/AndroidCourse/android/05-ButtonAction/setid01.png" width="500" title="rerationcode"></p>
<blockquote>
<p>button -&gt; BookSearchBtn</p>
</blockquote>
<p>合わせて他のウィジェットの<strong>“ID”</strong>項目も変更していきます。<br>※もし変更前IDが一致していなくても、Noと場所の照らし合わせを正として修正してください<br><img src="/AndroidCourse/android/05-ButtonAction/setid03.png" width="500" title="rerationcode"></p>
<table>
<thead>
<tr>
<th style="text-align:center">No.</th>
<th style="text-align:left">変更前のID</th>
<th style="text-align:left">変更後ID</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">①</td>
<td style="text-align:left">button</td>
<td style="text-align:left">BookSearchBtn</td>
</tr>
<tr>
<td style="text-align:center">②</td>
<td style="text-align:left">editText</td>
<td style="text-align:left">BookSearchEdit</td>
</tr>
<tr>
<td style="text-align:center">③</td>
<td style="text-align:left">button2</td>
<td style="text-align:left">HistoryBtn</td>
</tr>
</tbody>
</table>
<p>IDを変更するとComponent Treeの表示にも変更が反映されます<br>これで画面のボタンなどに”ID”項目を設定することができました、ここからがjavaプログラムの実装です、MainActivity.javaからウィジェットやビューと関連付けの方法を紹介していきます。</p>
<p>ButtonやEditTextなどのウィジェットをjavaプログラムで操作できる様にするにはいくつかの方法がありますが、一番よく使う方法として<font color="red"><code>findViewById()</code></font>を使う方法で実装していきます。<br>“setContentView” で関連付けたレイアウトxml内のウィジェットやビューに設定した”ID”を<code>findViewById</code>の後ろの “()”内に 指定することでjavaプログラムで”ボタンをクリックした時”の命令を登録したり、”ボタンに表示する文言などを表示後に変更する”ことができる様になります。</p>
<h2><span id="コード記述時の便利機能">コード記述時の便利機能</span></h2><p>これからコード記述する中でIDの入力中に小さいリスト表示がされると思いますので十字キーの上下を押して選択し、<code>Enter</code>キーを押せばプログラムに反映されるので試してみてください。<br><img src="/AndroidCourse/android/05-ButtonAction/setid05.png" width="650" title="rerationcode"></p>
<p>上記の便利機能を踏まえて<code>findViewById</code>メソッドと “activity_main.xml”で設定した<strong>ID</strong>を使ってButtonウィジェットの関連付けを行います。<br><figure class="highlight java"><figcaption><span>MainActivity.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓追加↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓</span></span><br><span class="line">    <span class="comment">// レイアウトxmlと関連付けるWidget</span></span><br><span class="line">    Button bookSearchBtn;</span><br><span class="line">    <span class="comment">//↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        <span class="comment">//↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓追加↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓</span></span><br><span class="line">        <span class="comment">// 蔵書検索ボタンをjavaプログラムで操作できるように名前をつける</span></span><br><span class="line">        bookSearchBtn = findViewById(R.id.BookSearchBtn);</span><br><span class="line">        <span class="comment">//↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>最初に実装したコードですので追加した２行にどんな意味合いがあるのかみていきましょう<br><img src="/AndroidCourse/android/05-ButtonAction/setid06.png" width="600" title="rerationcode"></p>
<table>
<thead>
<tr>
<th style="text-align:center">No.</th>
<th style="text-align:left">各No.のコードの説明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">①</td>
<td style="text-align:left">activity_main.xml内のウィジェットと関連づける型</td>
</tr>
<tr>
<td style="text-align:center">②</td>
<td style="text-align:left">MainActivity.javaで使う時のユニークな名前</td>
</tr>
<tr>
<td style="text-align:center">③</td>
<td style="text-align:left">①〜②で宣言したウィジェットに情報を登録する時の記述方法</td>
</tr>
<tr>
<td style="text-align:center">④</td>
<td style="text-align:left">④のIDを使いactivity_main.xml内のウィジェット/ビューを取得するプログラム</td>
</tr>
<tr>
<td style="text-align:center">⑤</td>
<td style="text-align:left">activity_main.xml内から取得するウィジェット/ビューのユニークID</td>
</tr>
</tbody>
</table>
<p>これで”蔵書検索”ボタンをxmlレイアウトとMainActivity.javaのプログラムで関連付けることができました。</p>
<p>xmlファイル内のウィジェットなどとjavaファイルの関連付けは非常に多く利用するコードですので利用方法を理解しておきましょう。</p>
<ul>
<li>①〜⑤の工程はプログラムで表示するデータを動的に一時的に記憶したり、表示したりする上で大事なクラス（変数）の宣言から初期化）を行なっています。</li>
<li>①〜②で追加したコードを<font color="blue">クラスの宣言</font>と言い、WidgetやView、その他のクラスをjavaプログラムで使うためにわかりやすい名前をつけて準備をしています。</li>
<li>本来ボタンオブジェクトは”ボタンの色”、”ボタンに表示する文字”など情報を持っていますが、①〜②の工程だけでは名前が準備されただけで<code>bookSearchBtn</code>は全く情報を持っていません。</li>
<li><code>bookSearchBtn</code>に情報を登録するには<font color="blue"><strong>オブジェクト化（インスタンス化とも呼ばれます）</strong></font>という工程が必要になります、<br>その工程が③〜⑤に該当しオブジェクト化を行なっており、この工程後に<code>bookSearchBtn</code>がもつ”ボタンの色”、”ボタンに表示する文字”などの情報を<br>参照したり変更したりすることが可能になります。</li>
</ul>
<h1><span id="ボタンクリックアクションの実装">ボタンクリックアクションの実装</span></h1><p>“蔵書検索”ボタンのクリックした時にクリックされたことを開発者に確認させるためログを出力するプログラムを作っていきます。<br>プログラムが上手く動かない時などどこまでプログラムが実行されたかを確認したり、実行中のデータを確認する時にも利用できるので試してみます。<br><figure class="highlight java"><figcaption><span>MainActivity.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// レイアウトxmlと関連付けるWidget</span></span><br><span class="line">    Button bookSearchBtn;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 蔵書検索ボタンをjavaプログラムで操作できるように名前をつける</span></span><br><span class="line">        bookSearchBtn = findViewById(R.id.BookSearchBtn);</span><br><span class="line">        <span class="comment">//↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓追加↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓</span></span><br><span class="line">        <span class="comment">// 蔵書検索ボタンが押された時の処理を実装</span></span><br><span class="line">        View.OnClickListener bookSearchEvent = <span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View view)</span> </span>&#123;</span><br><span class="line">                <span class="comment">// コンソールログにボタンが押されたことを出力(表示)</span></span><br><span class="line">                Log.d(<span class="string">"BookSearchBtn"</span>, <span class="string">"onClick: BookSearch Button"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">// 蔵書検索ボタンが押された時に実行するプログラムをボタンに登録</span></span><br><span class="line">        bookSearchBtn.setOnClickListener(bookSearchEvent);</span><br><span class="line">        <span class="comment">//↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>上記コードの実装が完了したら動作確認をします、<code>Run</code>アイコンをクリックしてエミュレータを起動します。<br>アプリ画面が表示されたら<strong>蔵書検索</strong>ボタンをクリックしてみてください。</p>
<p>Android Studioの左下<font color="red">Logcat</font>タブをクリックし、赤枠のログが出力されていることを確認してみましょう。<br><img src="/AndroidCourse/android/05-ButtonAction/setid07.png" width="650" title="rerationcode"><br>実装したコードで表示されるログですが、出力するためには以下のような形式で実装する必要があります。<br>ログを表示するプログラムのとして以下のテンプレートを覚えておきましょう。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Log.d(&quot;tag name&quot;, &quot;message&quot;);</span><br></pre></td></tr></table></figure></p>
<p>ボタンを押した時にログを表示する命令を実行するプログラムを実装ました、ここまでの全体の工程をおさらいします。<br><img src="/AndroidCourse/android/05-ButtonAction/DesignCode.png" width="450" title="DesignCode"><br>文字の色分けなどは以下の通りです</p>
<ul>
<li><font color="blue">青文字</font>の「ボタン押下時に検索を行う」が大きな課題</li>
<li><font color="red">赤文字</font>、黒文字で書かれたところがエンジニアの気づくべき手順</li>
<li>また<font color="red">赤文字</font>の「画面にボタンを表示する必要がある」「ボタンが押された時にプログラムを実行する必要がある」の２つは編集が必要なファイルごとの課題</li>
<li><font color="gray">灰色の四角</font>に囲われている内容がエンジニアがコードを記述する必要のある箇所</li>
</ul>
<p>ここまでに聞きなれない単語がいくつか出てきました、アプリ開発に限らずプログラムを<br>行なっていく上で<font color="blue"><strong>とても重要</strong></font>な概念ですので詳しく解説します。</p>
<h2><span id="クラス-変数">クラス、変数</span></h2><p>プログラムで使用するデータを一時的に記憶しておいたり、計算や画面に表示するデータとして使用するために使用する概念になります。<br>変数を解説/理解する上で色々なたとえがあるのですが、以下Wikipediaの内容が一番理解しやすかったので一部引用させてもらいました。</p>
<blockquote><p>データを一定期間記憶し必要なときに利用できるようにするために、データに固有の名前を与えたものである。 一人一人の人間が異なる名前によって区別されるように、一つ一つの変数も名前によって区別される。<br>変数が表しているデータをその変数の値（あたい）という。</p>
<footer><strong>変数(プログラミング)</strong><cite><a href="https://ja.wikipedia.org/wiki/%E5%A4%89%E6%95%B0_(%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0)" target="_blank" rel="external">wikipedia</a></cite></footer></blockquote>
<p>一部文中省いているところはありますが、上記の様にデータを一定期間記憶、使用することができる固有（ユニーク）な名称をつけたものになります。<br>変数につけた固有名称を変数名と呼びます。</p>
<p>変数に記憶しておけるデータの種類が決まっており、種類のことを<strong><em>型</em></strong>と呼びます。<br>型は一度決めてしまうと後から変更することはできません。<br>型の種類は以下の通りです、Stringは厳密には型ではありませんが、頻繁に使用するので一緒に記載しておきます。</p>
<table>
<thead>
<tr>
<th style="text-align:left">型名</th>
<th style="text-align:center">記憶できるデータ</th>
<th style="text-align:left">データの範囲</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">byte</td>
<td style="text-align:center">符号つき8ビット整数型</td>
<td style="text-align:left">-128 ～ 127</td>
</tr>
<tr>
<td style="text-align:left">short</td>
<td style="text-align:center">符号つき16ビット整数型</td>
<td style="text-align:left">-32768 ～ 32767</td>
</tr>
<tr>
<td style="text-align:left">int</td>
<td style="text-align:center">符号つき32ビット整数型</td>
<td style="text-align:left">-2147483648 ～ 2147483647</td>
</tr>
<tr>
<td style="text-align:left">long</td>
<td style="text-align:center">符号つき64ビット整数型</td>
<td style="text-align:left">-9223372036854775808 ～ 9223372036854775807</td>
</tr>
<tr>
<td style="text-align:left">float</td>
<td style="text-align:center">32ビット浮動小数点数型</td>
<td style="text-align:left">1.4E-45 〜 3.4028235E38</td>
</tr>
<tr>
<td style="text-align:left">double</td>
<td style="text-align:center">64ビット浮動小数点数型</td>
<td style="text-align:left">4.9E-324 〜　1.7976931348623157E308</td>
</tr>
<tr>
<td style="text-align:left">boolean</td>
<td style="text-align:center">論理型</td>
<td style="text-align:left">true(真)、false(偽)</td>
</tr>
<tr>
<td style="text-align:left">char</td>
<td style="text-align:center">符号なし１６ビット文字型</td>
<td style="text-align:left">Unicode文字１文字 : ¥0000 〜 ¥FFFF / 0 〜 65535</td>
</tr>
<tr>
<td style="text-align:left">String</td>
<td style="text-align:center">文字列クラス</td>
<td style="text-align:left">複数の文字を扱うことができる</td>
</tr>
</tbody>
</table>
<p>クラス、変数を利用するための操作として<strong>宣言</strong>、<strong>代入</strong>、<strong>参照</strong>の３つがあります。</p>
<ul>
<li>宣言<ul>
<li>一定期間記憶しておくデータの型、変数名を明確に記述することを宣言と呼びます、宣言を行わないと変数は参照できません</li>
</ul>
</li>
<li>代入<ul>
<li>宣言した変数に一定期間記憶しておくデータを登録/更新すること</li>
<li>宣言された変数に最初にデータを登録(格納)することを<em>初期化</em>と言います</li>
<li>宣言されたクラスに最初にデータを<em>オブジェクト化(インスタンス化)</em>と言います</li>
</ul>
</li>
<li>参照<ul>
<li>宣言され、初期化された変数のデータを利用することを指します</li>
<li>数値であれば計算に利用したり、文字列であれば画面に表示する際に<strong>参照</strong>することが多いです</li>
</ul>
</li>
</ul>
<p>次に変数とクラスはプログラミング上の利用方法が似ているためここでは一緒に紹介しますが、変数とクラスでは記憶しておけるデータの量が違います。<br>それぞれの特徴としては<br>変数：<strong>変数は１つだけデータを記憶しておくことができる</strong><br>クラス：<strong>クラスは複数の変数を複数記憶することができ、次に紹介するメソッドも複数持つことができる</strong><br>という違いがあります。</p>
<p>クラスは内部に変数を持っていることも多く、今回使用している<code>Button</code>クラスは内部でボタンに表示する文字列や表示する座標位置など<br>様々な情報を持っており、その情報を参照するためのメソッドが用意されています。</p>
<h3><span id="ウィジェットとクラス">ウィジェットとクラス</span></h3><p>ウィジェットもクラスに該当します、違いはというとAndroid SDKが準備した画面表示の要素の有無となります。<br>ウィジェット = クラスであり、Android SDKに準備されているレイアウトxmlファイルに表示できる要素を持っているものと区別しましょう。</p>
<h2><span id="メソッド">メソッド</span></h2><p>複数の命令を組み合わせた処理の一まとまりをjavaでは<strong>メソッド</strong>と呼びます。<br>また<strong>メソッド</strong>にも名称をつけて管理しており、<em>メソッド名</em>と呼びます。</p>
<p>すでに上記までにメソッドは出てきており、<br><code>onCreate()</code>や<code>setContentView()</code>、<code>findViewById()</code>がメソッドに該当します。</p>
<p>メソッドも変数に類似している箇所があり、利用するための操作として<strong>宣言</strong>、<strong>実装部</strong>、<strong>参照</strong>の３つがあります。</p>
<ul>
<li>宣言<ul>
<li><em>戻り値</em>の型、メソッド名を明確に記述することを宣言と呼びます、宣言を行わないと参照できません</li>
<li>メソッドの実装部で命令を進めるために基準となるデータが必要な場合があり、データをメソッドに渡すことができます、この機能を<em>引数(引数)</em>と呼びます</li>
</ul>
</li>
<li>実装部<ul>
<li>メソッドが行う複数の命令を全て記述されている箇所</li>
</ul>
</li>
<li>参照<ul>
<li>メソッドを利用すること、メソッドの実装部にバグがなければ戻り値を受け取ることができる</li>
</ul>
</li>
</ul>
<p>メソッドの利用において難しいポイントは<em>戻り値</em>と<em>引数</em>になる場合が多いです。<br>メソッド宣言は形式が決まっているため、見合わせるとどこに何が明記されているかわかりやすくなります。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">戻り値の型 メソッド名 (引数の型 引数名) &#123;</span><br><span class="line">   メソッドの実装部 </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><em>戻り値の前に”protected”,”public”などのアクセス修飾子と呼ばれるコードが書かれていることが多いですが、アクセス修飾子は後の講義で解説します。</em></p>
<p><code>onCreate()</code>メソッドを例にすると<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">    メソッドの実装部</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>“void” = 戻り値の型<br>“onCreate” = メソッド名<br>“Bundle” = 引数の型<br>”savedInstanceState” = 引数名<br>ということになります。<br>上記で<strong>void</strong>という新しい型が出てきましたが、戻り値がないことを明示するコードになります。<br>void型の変数は存在しないのでメソッドの宣言時以外ではあまり見かけないコードです。</p>
<p>そして宣言箇所で”引数の型”、”引数名”が記載されていないメソッドは引数が無いメソッドということになります。</p>
<p>続いてメソッドを参照している箇所は<code>setContetView()</code>を例にします。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setContetView(R.layout.activity_main.xml)</span><br></pre></td></tr></table></figure></p>
<p>メソッド名の後の “()” 内に引数を設定します、”setContentView”メソッドは参照時に画面表示するレイアウトxmlの情報を引数に記述することで、引数に記述したレイアウトを画面表示する命令を実行しています。</p>
<h1><span id="ボタンクリックアクションでトースト表示機能">ボタンクリックアクションでトースト表示機能</span></h1><p>先程までのコードを拡張してToast表示機能を実装していきます。<br>EditTextに入力された文字を画面に表示するプログラムに作り変えていきます。<br><figure class="highlight java"><figcaption><span>MainActivity.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// レイアウトxmlと関連付けるWidget</span></span><br><span class="line">    Button bookSearchBtn;</span><br><span class="line">    <span class="comment">//↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓追加↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓</span></span><br><span class="line">    EditText bookSearchEditor;</span><br><span class="line">    <span class="comment">//↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 蔵書検索ボタンをjavaプログラムで操作できるように名前をつける</span></span><br><span class="line">        bookSearchBtn = findViewById(R.id.BookSearchBtn);</span><br><span class="line">        <span class="comment">//↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓追加↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓</span></span><br><span class="line">        <span class="comment">// 蔵書検索する文字を入力するEditTextをjavaプログラムで操作できるように名前をつける</span></span><br><span class="line">        bookSearchEditor = findViewById(R.id.BookSearchEdit);</span><br><span class="line">        <span class="comment">//↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑</span></span><br><span class="line">        <span class="comment">// 蔵書検索ボタンが押された時の処理を実装</span></span><br><span class="line">        View.OnClickListener bookSearchEvent = <span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View view)</span> </span>&#123;</span><br><span class="line">                <span class="comment">// コンソールログにボタンが押されたことを出力(表示)</span></span><br><span class="line">                Log.d(<span class="string">"BookSearchBtn"</span>, <span class="string">"onClick: BookSearch Button"</span>);</span><br><span class="line">                <span class="comment">//↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓追加↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓</span></span><br><span class="line">                <span class="comment">// 入力された文字をToast(トースト)に表示</span></span><br><span class="line">                Toast.makeText(getBaseContext()</span><br><span class="line">                        , <span class="string">"入力された文字は ["</span> + bookSearchEditor.getText().toString() + <span class="string">"]です。"</span></span><br><span class="line">                        , Toast.LENGTH_LONG).show();</span><br><span class="line">                <span class="comment">//↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">// 蔵書検索ボタンが押された時に実行するプログラムをボタンに登録</span></span><br><span class="line">        bookSearchBtn.setOnClickListener(bookSearchEvent);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>コードの修正が終わったら<code>Run</code>アイコンをクリックしてエミュレータにアプリをインストールし直します。<br>コードを修正した場合、エミュレータや実機にインストールし直さないとレイアウトやプログラムの修正は反映されないので気をつけましょう。</p>
<p>EditTextに文字を入力してから<strong>蔵書検索</strong>ボタンをクリックしてみます。<br>前回のログ確認と違い、以下の画面のように文字が表示されたでしょうか？<br><img src="/AndroidCourse/android/05-ButtonAction/setid08.png" width="300" title="rerationcode"></p>
<p>この画面上に現れる機能がToastです、一方的にユーザに情報を伝える時などに利用します、<br>Toastは一定時間で自動的に非表示になりますので、Toast用の確認ボタンなどは存在しません。</p>
<h1><span id="色々なボタンイベントの実装">色々なボタンイベントの実装</span></h1><p>ボタンが押した時のプログラム実装解説は以上になります。<br>しかしボタンイベントを実装方法に絞ってもボタンが押された時のプログラムの記述方法がいくつもあります。<br>その例をいくつか紹介します。</p>
<p>ここでは色々な新しい単語も紹介しますが、単語に関しては実際に利用する時に詳しく解説します。</p>
<h2><span id="パターン1">パターン１</span></h2><p>ボタンが押された時のプログラムをボタンに登録しながら実装するパターンです<br>ボタンが押された時のプログラムが短いものなど多く使われるパターンです</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    Button bookSearchBtn;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line">        bookSearchBtn = findViewById(R.id.BookSearchBtn);</span><br><span class="line">        bookSearchBtn.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">                <span class="comment">// ボタンをクリックした時の命令</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="パターン2">パターン２</span></h2><p><code>bookSearchBtn</code>の宣言場所が違う実装方法<br>パターン２は<code>bookSearchBtn</code>インスタンスの宣言スコープが違う実装方法です</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line">        Button bookSearchBtn = findViewById(R.id.BookSearchBtn);</span><br><span class="line">        bookSearchBtn.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">                <span class="comment">// ボタンをクリックした時の命令</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="パターン3">パターン３</span></h2><p>当ページで紹介したプログラムとボタンイベントのプログラムのスコープを<code>MainActivityクラス</code>全体で使えるようにした実装方法です<br>当ページで紹介したパターンと違い<code>MainActivityクラス</code>全体で使うことができます</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    Button bookSearchBtn;</span><br><span class="line"></span><br><span class="line">    View.OnClickListener bookSearchEvent = <span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View view)</span> </span>&#123;</span><br><span class="line">            <span class="comment">// ボタンをクリックした時の命令</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line">        bookSearchBtn = findViewById(R.id.BookSearchBtn);</span><br><span class="line">        bookSearchBtn.setOnClickListener(bookSearchEvent);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="パターン4">パターン４</span></h2><p><code>View.OnClickLister</code>インターフェースをMainActivityクラスに付与した実装方法<br>パターン４はボタンが押された時の実装をMainActivityクラスに委譲した実装方法です</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> <span class="keyword">implements</span> <span class="title">View</span>.<span class="title">OnClickListener</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    Button bookSearchBtn;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line">        bookSearchBtn = findViewById(R.id.BookSearchBtn);</span><br><span class="line">        bookSearchBtn.setOnClickListener(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View view)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ボタンをクリックした時の命令</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="パターン5">パターン５</span></h2><p>新しくボタンクリックイベントのインナークラス(外部クラス)を作成する実装方法<br>この方法はリスト表示されている時などに使うことが多いです</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    Button bookSearchBtn;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line">        bookSearchBtn = findViewById(R.id.BookSearchBtn);</span><br><span class="line">        bookSearchBtn.setOnClickListener(<span class="keyword">new</span> ButtonClick());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">ButtonClick</span> <span class="keyword">implements</span> <span class="title">View</span>.<span class="title">OnClickListener</span> </span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View view)</span> </span>&#123;</span><br><span class="line">            <span class="comment">// ボタンをクリックした時の命令</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>他にもボタンが押された時のプログラムの書き方はありますが、上記の4パターンが使われていることが多いです。<br>ボタンに限ったプログラムの書き方だけでもこれだけのパターンがあり、ボタンが押されたイベント以外にも同じファイルにプログラムが<br>記述されると最初はプログラムを見るのが嫌になってしまうこともあるかもしれません。</p>
<p>ですが、<font color="red"><strong>プログラムを細かく見る（読む）</strong></font>ことで名前のつけ方に共通点を見つけたり単語を検索しながら考え、失敗を繰り返しながら試すことで<br>プログラムを深く理解することができるようになります。</p>
<h1><span id="プログラミング課題">プログラミング課題</span></h1><p>今回の課題ではプログラミングを進める中で必ず出てくる<strong>超重要</strong>な処理の、”条件分岐”、”繰り返し”処理の書き方を学習していきます。<br>蔵書検索アプリを作る中でもこの先で何度も出てくるので忘れない様しっかり課題にしていきます。</p>
<h2><span id="条件分岐処理">条件分岐処理</span></h2><p>１つ目の<strong>超重要</strong>処理は”条件分岐”です。<br>単語だけを聞くと使い方など難しく感じるかもしれませんが、</p>
<ul>
<li>晴れているので外で遊ぶ</li>
<li>雨が降っているので家で勉強する</li>
</ul>
<p>上記の様に「〜だったら○○をする」という条件に該当した時に特定の処理を実行する制御文です。<br>晴れている条件だけをプログラムにすると<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (晴れている) &#123;</span><br><span class="line">    外で遊ぶ</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>さらに、雨が降った時の条件を加えて見ます<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (晴れている) &#123;</span><br><span class="line">    外で遊ぶ</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (雨が降っている) &#123;</span><br><span class="line">    家で勉強する</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>さらにさらにそれ以外の天気全ての場合には “電車で図書館に向かう”条件をつか加えます<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (晴れている) &#123;</span><br><span class="line">    外で遊ぶ</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (雨が降っている) &#123;</span><br><span class="line">    家で勉強する</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    電車で図書館に向かう</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>条件分岐処理<code>if</code>文の実装方法は以上のパターンが多く “else if”をなしに”if~else”だけで記述することも可能です。<br><code>if</code>文の使い方のテンプレートとしては以下です。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (条件判定文) &#123;</span><br><span class="line">    条件判定文に該当した場合に処理する命令</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>試しにEditTextに入力された文字数が３文字より多い時だけToastを表示する様に修正します。<br>String型変数の文字数を参照するには<code>length()</code>メソッドを使います。<br><figure class="highlight java"><figcaption><span>MainActivity.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">...一部省略</span><br><span class="line">    <span class="comment">// 蔵書検索ボタンが押された時の処理を実装</span></span><br><span class="line">    View.OnClickListener bookSearchEvent = <span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View view)</span> </span>&#123;</span><br><span class="line">            <span class="comment">// コンソールログにボタンが押されたことを出力(表示)</span></span><br><span class="line">            Log.d(<span class="string">"BookSearchBtn"</span>, <span class="string">"onClick: BookSearch Button"</span>);</span><br><span class="line">            <span class="comment">//↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓修正↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓</span></span><br><span class="line">            <span class="comment">// EditTextの文字列を別の変数に代入</span></span><br><span class="line">            String inputText = bookSearchEditor.getText().toString();</span><br><span class="line">            <span class="comment">// inputTextの文字数が3文字より多いか判定</span></span><br><span class="line">            <span class="keyword">if</span> (inputText.length() &gt; <span class="number">3</span>) &#123;</span><br><span class="line">                <span class="comment">// 3文字より多い場合はToastを表示する</span></span><br><span class="line">                Toast.makeText(getBaseContext()</span><br><span class="line">                        , <span class="string">"EditTextの文字数は "</span> + inputText.length() + <span class="string">"文字です。"</span></span><br><span class="line">                        , Toast.LENGTH_LONG).show();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// 蔵書検索ボタンが押された時に実行するプログラムをボタンに登録</span></span><br><span class="line">    bookSearchBtn.setOnClickListener(bookSearchEvent);</span><br><span class="line">...一部省略</span><br></pre></td></tr></table></figure></p>
<p>上記コードを実装したら動作確認します。<br>EditTextが3文字より多い場合だけToastが表示される様になりましたか？</p>
<p><code>if</code>文で判定処理を行う場合は、必ず条件の結果が「正(true)/非(false)」のどちらかになる様に条件を記述します。<br>上記でEditTextの文字列を判定する際に <strong>&gt;</strong>という記号を使いましたが、これを<strong><em>比較演算子</em></strong>と呼びます。<br>比較演算子には以下の通りの種類がありますので、状況に応じて使い分けます。</p>
<table>
<thead>
<tr>
<th style="text-align:left">論理演算子</th>
<th style="text-align:left">正(true)判定の条件</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">==</td>
<td style="text-align:left">左右の値が同じ場合のみ正(true)</td>
</tr>
<tr>
<td style="text-align:left">&gt;</td>
<td style="text-align:left">右の値より右の値が1以上大きい時に正(true)</td>
</tr>
<tr>
<td style="text-align:left">&lt;</td>
<td style="text-align:left">左の値より右の値が1以上大きい時に正(true)</td>
</tr>
<tr>
<td style="text-align:left">&gt;=</td>
<td style="text-align:left">左の値が右の値以上の時に正(true)</td>
</tr>
<tr>
<td style="text-align:left">&lt;=</td>
<td style="text-align:left">右の値が左の値以上の時に正(true)</td>
</tr>
</tbody>
</table>
<p>上記、”正(true)判定の条件”以外の場合は非(false)となります。<br>では改めて<code>if</code>構文を使った課題です、以下の条件を満たすプログラムに修正してください。</p>
<ul>
<li>EditTextに入力されている文字数が3文字以下の場合はToastで「EditTextの文字数は○文字です。」と表示します。<ul>
<li>○の中はEditTextの文字数を表示します。</li>
</ul>
</li>
<li>EditTextに入力されている文字数が10文字より多い場合はToastで「10文字以下で入力してください。」と表示します。</li>
<li>それ以外の場合はToastで「EditTextに○○と入力されています。」と表示します。<ul>
<li>○の中はEditTextの文字列を表示します。</li>
</ul>
</li>
</ul>
<h2><span id="繰り返し処理">繰り返し処理</span></h2><p>２つ目の<strong>超重要</strong>処理は”繰り返し”です。<br>文字通り同じ処理を繰り返します。指定処理を指定の回数繰り返し処理する制御文です。<br>繰り返し処理の基本は<code>for</code>文と呼ばれています。<br>ある処理を10回繰り返したい時以下の様に実装します。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">    繰り返したい処理</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>上記のコードをテンプレートとして解説すると、<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (繰り返し変数の初期化; 繰り返す回数を決める条件; 繰り返し変数の増減式) &#123;</span><br><span class="line">    繰り返したい処理</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>となります。<br>まずは使って見ましょう、<code>if</code>文の課題の続きでプログラムを修正します、<br>ログを使って繰り返されているか確認してます。<br><figure class="highlight java"><figcaption><span>MainActivity.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">...一部省略</span><br><span class="line">    <span class="comment">// 蔵書検索ボタンが押された時の処理を実装</span></span><br><span class="line">    View.OnClickListener bookSearchEvent = <span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View view)</span> </span>&#123;</span><br><span class="line">            <span class="comment">//↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓修正↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓</span></span><br><span class="line">            <span class="comment">// コンソールログにボタンが押されたことを５回出力(表示)</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">                Log.d(<span class="string">"BookSearchBtn"</span>, <span class="string">"蔵書検索ボタンが押されました："</span> + (i + <span class="number">1</span>) + <span class="string">"回目"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑</span></span><br><span class="line">            <span class="comment">// EditTextの文字列を別の変数に代入</span></span><br><span class="line">            String inputText = bookSearchEditor.getText().toString();</span><br><span class="line">            <span class="comment">// inputTextの文字数が3文字より多いか判定</span></span><br><span class="line">            <span class="keyword">if</span> (inputText.length() &gt; <span class="number">3</span>) &#123;</span><br><span class="line">                <span class="comment">// 3文字より多い場合はToastを表示する</span></span><br><span class="line">                Toast.makeText(getBaseContext()</span><br><span class="line">                        , <span class="string">"EditTextの文字数は "</span> + inputText.length() + <span class="string">"文字です。"</span></span><br><span class="line">                        , Toast.LENGTH_LONG).show();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// 蔵書検索ボタンが押された時に実行するプログラムをボタンに登録</span></span><br><span class="line">    bookSearchBtn.setOnClickListener(bookSearchEvent);</span><br><span class="line">...一部省略</span><br></pre></td></tr></table></figure></p>
<p>上記コードを実装したら動作確認します。<br><code>Logcat</code>を確認して「蔵書検索ボタンが押されました：○回目」と５回表示されていれば成功です。<br>次はログに星を沢山表示させて見ます。<br><figure class="highlight java"><figcaption><span>MainActivity.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">...一部省略</span><br><span class="line">    <span class="comment">// 蔵書検索ボタンが押された時の処理を実装</span></span><br><span class="line">    View.OnClickListener bookSearchEvent = <span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View view)</span> </span>&#123;</span><br><span class="line">            <span class="comment">//↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓修正↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓</span></span><br><span class="line">            <span class="comment">// コンソールログにボタンが押されたことを５回出力(表示)</span></span><br><span class="line">            String star = <span class="string">"☆"</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">                Log.d(<span class="string">"BookSearchBtn"</span>, star);</span><br><span class="line">                star += <span class="string">"☆"</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑</span></span><br><span class="line">            <span class="comment">// EditTextの文字列を別の変数に代入</span></span><br><span class="line">            String inputText = bookSearchEditor.getText().toString();</span><br><span class="line">            <span class="comment">// inputTextの文字数が3文字より多いか判定</span></span><br><span class="line">            <span class="keyword">if</span> (inputText.length() &gt; <span class="number">3</span>) &#123;</span><br><span class="line">                <span class="comment">// 3文字より多い場合はToastを表示する</span></span><br><span class="line">                Toast.makeText(getBaseContext()</span><br><span class="line">                        , <span class="string">"EditTextの文字数は "</span> + inputText.length() + <span class="string">"文字です。"</span></span><br><span class="line">                        , Toast.LENGTH_LONG).show();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// 蔵書検索ボタンが押された時に実行するプログラムをボタンに登録</span></span><br><span class="line">    bookSearchBtn.setOnClickListener(bookSearchEvent);</span><br><span class="line">...一部省略</span><br></pre></td></tr></table></figure></p>
<p>上記コードで動作確認します。<br><code>Logcat</code>にて５行の星が一個づつ増えて表示されたでしょうか？<br>では最後に<code>for</code>と<code>if</code>構文を合わせて使う課題です、<br>以下の条件を満たすプログラムに修正してください。</p>
<ul>
<li>繰り返し処理において、何回目の繰り返し処理かログに表示します。<ul>
<li>「○回目の繰り返し処理」とログに出力されている。(○は繰り返し回数を表示)</li>
</ul>
</li>
<li>偶数の時だけ「☆」を表示する。星の表示個数は繰り返しの回数と同じ個数とします。</li>
<li>最後に表示される「☆」の数が10個であること。</li>
</ul>
<p>以上でボタンが押された時のプログラム実装ができました、次の<a href="/AndroidCourse/android/06-TransitionScreen">検索結果一覧画面作成</a>ではリスト表示レイアウト及び、画面遷移処理に関して実装していきます。</p>
</div><!-- comment system--><div class="container"><hr></div></article><footer id="footer"><div class="container"><div class="bar"><div class="social"><a href="/atom.xml" target="_blank"><i class="fa fa-rss"></i></a></div><div class="footer">© 2018 <a href="/" rel="nofollow">kuririnz</a>. Powered by <a rel="nofollow" target="_blank" href="https://hexo.io">Hexo</a>. Theme <a target="_blank" href="https://github.com/lotabout/very-simple">very-simple</a>.</div></div></div></footer><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
    $(".fancybox").fancybox();
});
</script></body></html>